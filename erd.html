<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go-Rent - Entity Relationship Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .diagram-container {
            margin: 40px 0;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }
        .description {
            margin: 20px 0;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 4px;
        }
        a.back-link {
            display: inline-block;
            margin-top: 30px;
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        a.back-link:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <h1>Entity Relationship Diagram (ERD)</h1>
    
    <div class="description">
        <p>This diagram shows the database structure of the Go-Rent platform, including tables and their relationships.</p>
        <p>The ERD illustrates how different entities like Users, Items, Bookings, and Payments are related to each other, forming the foundation of the system's data model.</p>
    </div>
    
    <div class="diagram-container">
        <pre class="mermaid">
        erDiagram
            USERS ||--o{ USER_PROFILES : has
            USERS ||--o{ ADDRESSES : has
            USERS ||--o{ ITEMS : lists
            ITEMS }o--|| CATEGORIES : belongs_to
            ITEMS ||--o{ ITEM_IMAGES : has
            ITEMS ||--o{ BOOKINGS : receives
            USERS ||--o{ BOOKINGS : makes
            BOOKINGS ||--o{ PAYMENTS : generates
            PAYMENTS ||--|| TRANSACTIONS : creates
            ITEMS ||--o{ REVIEWS : receives
            USERS ||--o{ REVIEWS : writes
            USERS ||--o{ CONVERSATIONS : participates
            CONVERSATIONS ||--o{ MESSAGES : contains
            USERS ||--o{ NOTIFICATIONS : receives
            
            USERS {
                int userId PK
                string email
                string passwordHash
                string phone
                boolean isVerified
                datetime createDate
                enum userType
                enum status
            }
            
            USER_PROFILES {
                int profileId PK
                int userId FK
                string firstName
                string lastName
                date dateOfBirth
                string profilePicUrl
                string bio
                string gender
            }
            
            ADDRESSES {
                int addressId PK
                int userId FK
                string street
                string city
                string state
                string country
                string postalCode
                boolean isDefault
            }
            
            ITEMS {
                int itemId PK
                int userId FK
                string title
                string description
                decimal price
                decimal securityDeposit
                text rentalTerms
                json availability
                enum status
                datetime createdAt
                datetime updatedAt
            }
            
            ITEM_IMAGES {
                int imageId PK
                int itemId FK
                string imageUrl
                boolean isPrimary
                datetime uploadDate
            }
            
            CATEGORIES {
                int categoryId PK
                int parentId FK
                string name
                string description
            }
            
            BOOKINGS {
                int bookingId PK
                int itemId FK
                int renterId FK
                date startDate
                date endDate
                decimal totalAmount
                decimal securityDeposit
                enum status
                datetime createdAt
            }
            
            PAYMENTS {
                int paymentId PK
                int bookingId FK
                decimal amount
                string paymentMethod
                enum status
                datetime paymentDate
            }
            
            TRANSACTIONS {
                int transactionId PK
                int paymentId FK
                enum status
                datetime createdAt
                datetime updatedAt
                json metadata
            }
            
            REVIEWS {
                int reviewId PK
                int itemId FK
                int reviewerId FK
                int providerId FK
                int bookingId FK
                int rating
                text comment
                datetime createdAt
                enum status
            }
            
            CONVERSATIONS {
                int conversationId PK
                int user1Id FK
                int user2Id FK
                int itemId FK
                datetime lastMessageDate
                enum status
            }
            
            MESSAGES {
                int messageId PK
                int conversationId FK
                int senderId FK
                text content
                datetime sentAt
                boolean isRead
            }
            
            NOTIFICATIONS {
                int notificationId PK
                int userId FK
                enum type
                text content
                boolean isRead
                datetime createdAt
            }
        </pre>
    </div>
    
    <div class="description">
        <h3>Key Relationships:</h3>
        <ul>
            <li>Users can have multiple profiles, addresses, and list multiple items</li>
            <li>Items belong to categories and can have multiple images</li>
            <li>Bookings connect users (renters) with items</li>
            <li>Payments are generated from bookings and create transactions</li>
            <li>Users can write reviews for items they've rented</li>
            <li>Users participate in conversations which contain messages</li>
        </ul>
    </div>
    
    <a href="index.html" class="back-link">‚Üê Back to Index</a>
    
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</body>
</html>
